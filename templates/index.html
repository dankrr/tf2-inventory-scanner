<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TF2 Inventory Checker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; }
        textarea { width: 100%; height: 100px; }
        img { vertical-align: middle; }
        .pill {
            background: #666;
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 4px;
            cursor: default;
        }
        .parsed { background: #4caf50; }
        .private { background: #999; }
        .failed { background: #c00; cursor: pointer; }
    </style>
</head>
<body>
    <h1>TF2 Inventory Checker</h1>
    <form method="post">
        <label for="steamids">Enter SteamIDs (separated by space, comma or newline):</label><br>
        <textarea id="steamids" name="steamids">{{ steamids|default('') }}</textarea><br>
        <button type="submit">Check Inventories</button>
    </form>

    {% if request.method == 'POST' %}
        <p>Processed {{ valid_count }} valid IDs{% if invalid_count %} (ignored {{ invalid_count }} invalid){% endif %}.</p>
    {% endif %}

    <button id="retry-all" disabled>Retry Failed</button>

    <div id="results">
    {% if users %}
        {% for user in users %}
            {% include '_user.html' with context %}
        {% endfor %}
    {% endif %}
    </div>

    <script src="{{ url_for('static', filename='retry.js') }}"></script>
</body>
</html>
